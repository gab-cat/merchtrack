// Permission entity with a code that can be attached to users (e.g., 'collect_payments')
model Permission {
  code             String           @id @unique
  description      String?
  canCreate        Boolean          @default(false)
  canRead          Boolean          @default(false)
  canUpdate        Boolean          @default(false)
  canDelete        Boolean          @default(false)
  userPermissions  UserPermission[]
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt

  @@index([code], name: "idx_permission_code")
}

// Pivot table for many-to-many relationship between User and Permission
model UserPermission {
  userId       String
  permissionId String

  user        User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  permission  Permission  @relation(fields: [permissionId], references: [code], onDelete: Cascade)

  // Composite primary key for the pivot
  @@id([userId, permissionId])
}
